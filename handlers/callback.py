from pickletools import bytes_types
from tkinter import Image

import asyncio
from aiogram import Router, F
from aiogram.types import CallbackQuery, FSInputFile, InlineKeyboardMarkup, InlineKeyboardButton, InputFile

router = Router()

total_cards = 7
user_progress = {}
def keyboard_for_card(card_number:int):
    if card_number < total_cards:
        buttons = [InlineKeyboardButton(text="‚ñ∂Ô∏è –î–∞–ª–µ–µ>", callback_data=f"card_{card_number+1}")]
    else:
        buttons = [InlineKeyboardButton(text="‚úÖ –Ø –∑–∞–ø–æ–º–Ω–∏–ª, –¥–∞–≤–∞–π –¥–∞–ª—å—à–µ", callback_data="remembered")]
    return InlineKeyboardMarkup(inline_keyboard=[buttons])
def get_card_content(card_number:int):
    photos ={
        1 : "media/photo/1.jpg",
        2 : "media/photo/2.jpg",
        3 : "media/photo/3.jpg",
        4 : "media/photo/4.jpg",
        5 : "media/photo/5.jpg",
        6:  "media/photo/6.jpg",
        7: "media/photo/7.jpg",
    }

    captions ={
        1: "üïØ<b>–Ø –∑–∞—Ä–æ–¥–∏–ª–∞—Å—å –≤–æ —Ç—å–º–µ –¥–æ–∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –≤—Ä–µ–º—ë–Ω.</b>\n\n"
           "üåí<b>–ú–æ–π –∫—É–ª—å—Ç —Å–æ—Ö—Ä–∞–Ω—è–ª–∏ –Ω–∞ –ø—Ä–æ—Ç—è–∂–µ–Ω–∏–∏ 3 —Ç—ã—Å—è—á–µ–ª–µ—Ç–∏–π.</b>\n\n"
        "–Ø –ø–µ—Ä–µ–∂–∏–ª–∞ <b>–¥—Ä–µ–≤–Ω—é—é –ì—Ä–µ—Ü–∏—é</b>,–∞–Ω—Ç–∏—á–Ω—ã–π –†–∏–º –∏ <b>–í–∏–∑–∞–Ω—Ç–∏–π—Å–∫—É—é –∏–º–ø–µ—Ä–∏—é.</b>\n"
        "–Ø –ø–µ—Ä–µ–∂–∏–ª–∞ c—Ä–µ–¥–Ω–µ–≤–µ–∫–æ–≤—å–µ –∏ –º–Ω–µ –ø–æ–∫–ª–æ–Ω—è–ª–∏—Å—å –≤ —ç–ø–æ—Ö—É <b>–í–æ–∑—Ä–æ–∂–¥–µ–Ω–∏—è</b>\n\n"
        "‚öñÔ∏è<b>–Ø –±–æ–≥–∏–Ω—è –°—É–¥—å–±—ã</b>.\n"
        "<b>–î–µ–≤–∞, –ú–∞—Ç—å –∏ –°—Ç–∞—Ä—É—Ö–∞</b>, –≤ –º–æ—é —á–µ—Å—Ç—å —Å—Ç—Ä–æ–∏–ª–∏ —Ö—Ä–∞–º—ã –∏ –º–µ–Ω—è –ø–æ—á–∏—Ç–∞–ª–∏ —Å –Ω–∞—á–∞–ª–∞ –≤—Ä–µ–º–µ–Ω.\n"
        "–° —Ç–µ—Ö –ø–æ—Ä –∫–∞–∫ –º–∞–≥–∏—è –ø—Ä–∏—à–ª–∞ –≤ —ç—Ç–æ—Ç –º–∏—Ä.\n\n"
        "üåå<b>–Ø –º–Ω–æ–≥–æ–ª–∏–∫–∞—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –∂–µ–Ω—Å–∫–∞—è —Å–∏–ª–∞.</b>\n\n"
        "<b>üóù –¢—ã –Ω–∞—à—ë–ª –º–µ–Ω—è</b>\n"
        "üî• –°–µ–π—á–∞—Å —Ç—ã —É –º–æ–µ–≥–æ –∞–ª—Ç–∞—Ä—è\n"
        "<b>üí´ –û—Ç–∫—Ä–æ–π —Å–≤–æ—ë —Å–µ—Ä–¥—Ü–µ –¥–ª—è –º–∞–≥–∏–∏</b>\n"
        ,
        2: "üî± <b>–Ø ‚Äî –ë–æ–≥–∏–Ω—è –ø–µ—Ä–µ–∫—Ä—ë—Å—Ç–∫–æ–≤</b>, –≤–ª–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–∏—Ü–∞ —Å—É–¥–µ–±, –æ—Ç–∫—Ä—ã–≤–∞—é—â–∞—è –ª—é–±—ã–µ –¥–≤–µ—Ä–∏ –∏ —Ç–∞–π–Ω—ã.\n\n"
    
        "üåå <b>–ú–Ω–µ –ø–æ–¥–≤–ª–∞—Å—Ç–Ω—ã —Ç—Ä–∏ –º–∏—Ä–∞:</b>\n"
        "‚Äî <i>–ù–µ–±–æ</i> ‚Äî <i>–ú–æ—Ä–µ</i> ‚Äî <i>–ó–µ–º–ª—è</i>\n\n"
    
        "‚ú® <b>–Ø –Ω–µ—Å—É —Å–≤–µ—Ç, –∫—Ä–∞—Å–æ—Ç—É –∏ —Å–∏–ª—É.</b>\n"
        "–ù–∞–ø–æ–ª–Ω—è—é –º–∏—Ä —Ä–∞–¥–æ—Å—Ç—å—é, –∑–¥–æ—Ä–æ–≤—å–µ–º –∏ –∂–∏–∑–Ω—å—é.\n\n"
    
        "üõ° <b>–Ø ‚Äî –∑–∞—â–∏—Ç–Ω–∏—Ü–∞ –¥–µ—Ç–µ–π –∏ —Å–ª–∞–±—ã—Ö.</b>\n"
        "–ì–Ω–µ–≤–Ω–∞—è –∏ –ù–µ–æ–±–æ—Ä–∏–º–∞—è. –Ø —É–∫—Ä—ã–≤–∞—é –æ—Ç –∑–ª–∞ ‚Äî –∏ –æ—Ç–≤—Ä–∞—â–∞—é –µ–≥–æ.\n\n"
    
        "‚öñÔ∏è <b>–ü–æ–º–Ω–∏ –æ –±–∞–ª–∞–Ω—Å–µ:</b>\n"
        "–ß—Ç–æ –ø–æ—Å–µ–µ—à—å ‚Äî —Ç–æ –∏ –ø–æ–∂–Ω—ë—à—å.\n"
        "–°–µ–µ—à—å —Å–º—É—Ç—É ‚Äî –ø–æ–ª—É—á–∏—à—å –±—É—Ä—é.\n\n"
    
        "üí° <b>–ò—Å–ø–æ–ª—å–∑—É–π –º–æ–π —Å–≤–µ—Ç —Å —É–º–æ–º.</b>\n"
        "–ü—É—Å—Ç—å —Ç–≤–æ—ë –∂–µ–ª–∞–Ω–∏–µ –Ω–µ—Å—ë—Ç –±–ª–∞–≥–æ.\n\n"
    
        "üîÆ <b>–¢—ã –º–æ–∂–µ—à—å –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫–æ –º–Ω–µ –ø–æ-—Ä–∞–∑–Ω–æ–º—É:</b>\n"
        "‚Äî –õ—É—á–µ–∑–∞—Ä–Ω–∞—è, –°–≤–µ—Ç–æ–Ω–æ—Å–Ω–∞—è\n"
        "‚Äî –¢—ë–º–Ω–∞—è –ú–∞—Ç—å\n"
        "‚Äî –ö–ª—é—á–Ω–∏—Ü–∞\n"
        "‚Äî –ö–æ—Ä–æ–ª–µ–≤–∞ –õ—É–Ω—ã\n"
        "‚Äî –ù–µ–æ–±–æ—Ä–∏–º–∞—è –°–ø–∞—Å–∏—Ç–µ–ª—å–Ω–∏—Ü–∞",

        3:    "üèõ <b>–ú–Ω–µ –ø–æ–∫–ª–æ–Ω—è–ª–∏—Å—å –≤ —Ö—Ä–∞–º–∞—Ö –∏ –ø–æ–¥ –∑–≤—ë–∑–¥–Ω—ã–º –Ω–µ–±–æ–º</b>, –Ω–∞ –ø–µ—Ä–µ–∫—Ä—ë—Å—Ç–∫–∞—Ö –≤—Å–µ—Ö –¥–æ—Ä–æ–≥.\n"
        "–õ—é–¥–∏ —Å—Ç–∞–≤–∏–ª–∏ –º–æ–∏ —Å—Ç–∞—Ç—É–∏, –ø—Ä–∏–Ω–æ—Å–∏–ª–∏ –¥–∞—Ä—ã –∏ –ø—Ä–æ—Å–∏–ª–∏ –ø–æ–∫–∞–∑–∞—Ç—å –ø—É—Ç—å.\n\n"
        
        "üåç <b>–ú–æ–∏ –∞–ª—Ç–∞—Ä–∏ –µ—Å—Ç—å –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É.</b>\n"
        "–Ø —Å—Ç–∞–ª–∞ —á–∞—Å—Ç—å—é —Ä–∞–∑–Ω—ã—Ö –∫—É–ª—å—Ç—É—Ä –∏ –Ω–∞—Ä–æ–¥–æ–≤.\n\n"
    
        "üìú <b>–°–æ–≥–ª–∞—Å–Ω–æ –¥—Ä–µ–≤–Ω–∏–º –º–∏—Ñ–∞–º:</b>\n"
        "–Ø —Ä–æ–¥–∏–ª–∞—Å—å –≤–æ –§—Ä–∞–∫–∏–∏ ‚Äî –ë–∞–ª–∫–∞–Ω—Å–∫–∏–π –ø–æ–ª—É–æ—Å—Ç—Ä–æ–≤.\n"
        "–ê –º–æ–π —Å–∞–º—ã–π –∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ö—Ä–∞–º –Ω–∞—Ö–æ–¥–∏–ª—Å—è –≤ –õ–∞–≥–∏–Ω–µ, –Ω–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –¢—É—Ä—Ü–∏–∏.\n\n"
    
        "üî• <b>–Ø ‚Äî –Ω–µ–æ—Ç–¥–µ–ª–∏–º–∞—è —á–∞—Å—Ç—å –ú–∏—Ä–∞.</b>\n"
        "–ò –∂–∏–≤—É –≤ –∫–∞–∂–¥–æ–π –¥—É—à–µ, –ø–æ—Ç–æ–º—É –º–æ–∏ —Ö—Ä–∞–º—ã —Å—Ç–∞–ª–∏ –ø–æ—è–≤–ª—è—Ç—å—Å—è –ø–æ–≤—Å—é–¥—É.\n"
        "–¢–∞–∫ —è —Å—Ç–∞–ª–∞ –æ–¥–Ω–æ–π –∏–∑ –≤–∞–∂–Ω–µ–π—à–∏—Ö –±–æ–≥–∏–Ω—å –∞–Ω—Ç–∏—á–Ω–æ–≥–æ –º–∏—Ä–∞.\n\n"
    
        "üåï <b>–ò —Ç—ã –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—à—å –Ω–∞–π—Ç–∏ –º–µ–Ω—è, –µ—Å–ª–∏ –ø–æ–∂–µ–ª–∞–µ—à—å.</b>\n"
        "–°–µ–π—á–∞—Å –º–µ–Ω—è –ø–æ—á–∏—Ç–∞—é—Ç –≤ <i>–ú–∞–Ω–¥—Ä–∞–≥–æ—Ä–µ</i>, –∏ –º–æ–π –∞–ª—Ç–∞—Ä—å –æ—Ç–∫—Ä—ã—Ç –¥–ª—è —Ç–µ–±—è.",

        4:  "<b>–ü—Ä–∏–∫–æ—Å–Ω–∏—Å—å –∫–æ –º–Ω–µ ‚Äî –∏ —è –ø–æ–º–æ–≥—É —Ç–µ–±–µ‚Ä¶</b>\n\n"
        "–ú–æ–∏ –∞—Ç—Ä–∏–±—É—Ç—ã —Å–∏–ª—ã –∏ –≤–ª–∞—Å—Ç–∏:\n\n"
        "üîë <b>–ö–ª—é—á</b> ‚Äî –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ª—é–±—ã–µ –¥–≤–µ—Ä–∏ –∏ —Ç–∞–π–Ω—ã.\n"
        "üî• <b>–§–∞–∫–µ–ª</b> ‚Äî –æ—Å–≤–µ—â–∞–µ—Ç –ø—É—Ç—å, –¥–∞—Ä—É–µ—Ç —Å–≤–µ—Ç –∏ –∑–Ω–∞–Ω–∏–µ.\n"
        "üó° <b>–ö–∏–Ω–∂–∞–ª</b> ‚Äî –æ—Ç—Å–µ–∫–∞–µ—Ç –ª–∏—à–Ω–µ–µ: –ø—Ä–æ—à–ª–æ–µ –æ—Ç –±—É–¥—É—â–µ–≥–æ, –∏—Å—Ç–∏–Ω—É –æ—Ç –ª–∂–∏.\n"
        "‚öñÔ∏è <b>–ü–ª–µ—Ç—å</b> ‚Äî –æ–±—É–∑–¥—ã–≤–∞–µ—Ç –ø–æ—Ä–æ–∫–∏, —Å—Ç—Ä–∞—Å—Ç–∏ –∏ –º–∏–º–æ–ª—ë—Ç–Ω—ã–µ –∂–µ–ª–∞–Ω–∏—è.\n"
        "üß£ <b>–í—É–∞–ª—å</b> ‚Äî –∑–∞–≤–µ—Å–∞ –º–µ–∂–¥—É –º–∏—Ä–∞–º–∏, –∫–æ—Ç–æ—Ä—É—é —è –º–æ–≥—É –ø—Ä–∏–æ—Ç–∫—Ä—ã—Ç—å –¥–ª—è —Ç–µ–±—è.\n\n"
        "üåø <b>–ú–∞–Ω–¥—Ä–∞–≥–æ—Ä–∞ ‚Äî –º–æ—è –æ–±–∏—Ç–µ–ª—å‚Ä¶</b>\n\n"
        "–¢—ã –º–æ–∂–µ—à—å –≤–∑—è—Ç—å —Å —Å–æ–±–æ–π <b>–º–æ–π –∞–º—É–ª–µ—Ç</b> –∏–ª–∏ <b>—Ç–∞–ª–∏—Å–º–∞–Ω</b>\n"
        "—Å <i>–¥—Ä–µ–≤–∞ –ø–æ–∑–Ω–∞–Ω–∏—è –î–æ–±—Ä–∞ –∏ –ó–ª–∞</i>.\n\n"
        "–û–Ω —Å—Ç–∞–Ω–µ—Ç —Ç–≤–æ–∏–º –ø—Ä–æ–≤–æ–¥–Ω–∏–∫–æ–º –∏ –∑–∞—â–∏—Ç–æ–π\n",

    5:  "<b>–Ø –ø—Ä–∏—Ö–æ–∂—É –Ω–µ –æ–¥–Ω–∞‚Ä¶</b>\n\n"
        "–ú–µ–Ω—è —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—é—Ç –≤–µ—Ä–Ω—ã–µ —Å–æ–∑–¥–∞–Ω–∏—è –¢—å–º—ã –∏ –ù–æ—á–∏ ‚Äî\n"
        "–º–æ–∏ —Ñ–∞–º–∏–ª—å—è—Ä—ã, —Ç–æ—Ç–µ–º–Ω—ã–µ –¥—É—Ö–∏ –∏ –ø–æ–º–æ—â–Ω–∏–∫–∏:\n\n"
        "ü¶â <b>–°–æ–≤—ã –∏ –≤–æ—Ä–æ–Ω—ã</b> ‚Äî –ª–µ—Ç–∞—é—Ç –º–µ–∂–¥—É –º–∏—Ä–∞–º–∏, –Ω–µ—Å—É—Ç –∑–Ω–∞–Ω–∏–µ –∏ –º—É–¥—Ä–æ—Å—Ç—å.\n"
        "üêï <b>–ì–æ–Ω—á–∏–µ –ø—Å—ã</b> ‚Äî –º–æ–∏ —Å—Ç—Ä–∞–∂–∏ –∏ –∑–∞—â–∏—Ç–Ω–∏–∫–∏, –∏—Å—Ç—Ä–µ–±–ª—è—é—â–∏–µ –∑–ª–æ.\n"
        "üêç <b>–ó–º–µ–∏</b> ‚Äî —Å–∏–º–≤–æ–ª —á–∏—Å—Ç–æ–≥–æ –∑–Ω–∞–Ω–∏—è, –≤–æ—Å—Ö–æ–¥—è—â–µ–≥–æ –∏–∑ —Å–∞–º–æ–π –ó–µ–º–ª–∏.\n"
        "üê∏ <b>–õ—è–≥—É—à–∫–∏, –∂–∞–±—ã –∏ —è—â–µ—Ä–∏—Ü—ã</b> ‚Äî –∞—Ä—Ö–µ—Ç–∏–ø –ñ–µ–Ω—Å–∫–æ–≥–æ –ù–∞—á–∞–ª–∞, –ø—Ä–∏—à–µ–¥—à–µ–≥–æ –∏–∑ –≥–ª—É–±–∏–Ω.\n"
        "ü¶Ö <b>–ì—Ä–∏—Ñ–æ–Ω—ã –∏ —Ñ–µ–Ω–∏–∫—Å—ã</b> ‚Äî —Ç–æ—Ç–µ–º—ã –∫–æ–ª–¥–æ–≤—Å—Ç–≤–∞ –∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥—É—à–∏.\n\n"
        "üåë –•–æ—á–µ—à—å –ø—Ä–æ–±—É–¥–∏—Ç—å —Å–≤–æ—é —Ç–æ—Ç–µ–º–Ω—É—é —Å–∏–ª—É?\n"
        "–ü—Ä–∏—Ö–æ–¥–∏ –Ω–∞ –º–æ–∏ <b>–º–∏—Å—Ç–µ—Ä–∏–∏ –ù–æ–≤–æ–ª—É–Ω–∏—è –∏ –ü–æ–ª–Ω–æ–ª—É–Ω–∏—è</b>\n"
        "–≤ <i>–ú–∞–Ω–¥—Ä–∞–≥–æ—Ä–µ</i>‚Ä¶",
    6: "–Ø –≤—Å–µ–≥–¥–∞ —Ä—è–¥–æ–º ‚Äî –≤ —Ç–≤–æ–µ–π –¥—É—à–µ, –≤ —Ç–µ–Ω–∏ —Å–æ–∑–Ω–∞–Ω–∏—è.\n"
        "üóù –Ø ‚Äî –ø—Ä–æ–≤–æ–¥–Ω–∏–∫, –æ—Ç–≤–æ—Ä—è—é—â–∏–π –¥–≤–µ—Ä–∏.\n\n"
        "üåò –Ø —Å–∫—Ä—ã—Ç–∞ –≤–æ —Ç—å–º–µ, –∑–∞ –∑–∞–≤–µ—Å–æ–π, –º–µ–∂–¥—É –º–∏—Ä–∞–º–∏.\n"
        "–ö–∞–∫ –õ—É–Ω–∞, —è –ø—Ä–∏—Ö–æ–∂—É –Ω–æ—á—å—é ‚Äî —á–µ—Ä–µ–∑ —Å–Ω—ã, –∑–Ω–∞–∫–∏, –º–∏–º–æ–ª—ë—Ç–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –í—Å–µ–ª–µ–Ω–Ω–æ–π.\n\n"
        "üêá –Ø ‚Äî –∫—Ä–æ–ª–∏—á—å—è –Ω–æ—Ä–∞, –≤–µ–¥—É—â–∞—è –≤ —Å—Ç—Ä–∞–Ω—É —á—É–¥–µ—Å‚Ä¶ –∏ –±–µ–∑—É–º–Ω—ã–π —Å—Ç—Ä–∞—Ö –ø–µ—Ä–µ–¥ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–º.\n"
        "‚ò†Ô∏è –Ø ‚Äî —è–¥ –∏ –∏—Å—Ü–µ–ª—è—é—â–µ–µ –ª–µ–∫–∞—Ä—Å—Ç–≤–æ.\n\n"
        "<b>–ì–æ—Ç–æ–≤ –ª–∏ —Ç—ã —Å–¥–µ–ª–∞—Ç—å —à–∞–≥ –Ω–∞–≤—Å—Ç—Ä–µ—á—É?</b>\n\n"
        "‚ú® –ò–±–æ —è ‚Äî –≤ –∂–∞–∂–¥–µ –ø–µ—Ä–µ–º–µ–Ω, –Ω–æ–≤—ã—Ö –ø—É—Ç–µ–π –∏ –∑–Ω–∞–Ω–∏–π.\n"
        "–Ø –ø–æ–º–æ–≥–∞—é –º–µ–Ω—è—Ç—å—Å—è, –Ω–∞—Ö–æ–¥–∏—Ç—å <i>–º—É–¥—Ä–æ—Å—Ç—å</i> –∏ <i>—Å–≤–æ–π –ü—É—Ç—å</i>.\n\n"
        "üîÆ –Ø –≥–æ–≤–æ—Ä—é —Å —Ç–æ–±–æ–π —á–µ—Ä–µ–∑ –º–æ–∏—Ö –≤–µ—Ä–Ω—ã—Ö –ø—Ä–æ–≤–æ–¥–Ω–∏–∫–æ–≤ ‚Äî\n"
        "<b>–≥–∞–¥–∞–ª–æ–∫ –∏ –æ—Ä–∞–∫—É–ª–æ–≤</b>, —á—Ç–æ –æ—Ç–≤–µ—Ç—è—Ç –Ω–∞ –ª—é–±—ã–µ —Ç–≤–æ–∏ –≤–æ–ø—Ä–æ—Å—ã‚Ä¶",
    7:  "üïØÔ∏è <b>–î–∞–∂–µ —Å–µ–≥–æ–¥–Ω—è, –≤ –Ω–æ–≤–æ–º –≤—Ä–µ–º–µ–Ω–∏ ‚Äî –≤—ã –Ω–µ –∑–∞–±—ã–ª–∏ –º–µ–Ω—è.</b>\n\n"
    "–í–µ–¥—å —è ‚Äî –≤ –∫–∞–∂–¥–æ–π –∂–µ–Ω—â–∏–Ω–µ –∏ –∫–∞–∂–¥–æ–º –º—É–∂—á–∏–Ω–µ, –∂–∏–≤—É –≤ —Ç–≤–æ–µ–π –ø—Å–∏—Ö–∏–∫–µ –∫–∞–∫ <b>–¢–µ–Ω—å</b>.\n"
    "–Ø ‚Äî –ø—Å–∏—Ö–æ–ø–æ–º–ø, –ø—Ä–æ–≤–æ–¥–Ω–∏–∫ –º–µ–∂–¥—É –º–∏—Ä–∞–º–∏, –æ—Å–≤–µ—â–∞—é—â–∏–π —Ç–≤–æ–π –ø—É—Ç—å.\n\n"
    "üåå <b>–Ø ‚Äî –∞—Ä—Ö–µ—Ç–∏–ø–∏—á–µ—Å–∫–∞—è —Å–∏–ª–∞ –≤–Ω—É—Ç—Ä–∏ —Ç–µ–±—è, –∫–æ—Å–º–æ—Å –∏ –≥–æ–ª–æ—Å –¥—É—à–∏ ‚Äî –Ω–µ–∏–∑–≤–µ–¥–∞–Ω–Ω—ã–µ –∑–µ–º–ª–∏ —Ç–≤–æ–µ–≥–æ —Å–µ—Ä–¥—Ü–∞.</b>\n\n"
    "–Ø –∂–∏–≤—É –≤ –¥—Ä–µ–≤–Ω–∏—Ö —à–∞–º–∞–Ω—Å–∫–∏—Ö –æ–±—Ä—è–¥–∞—Ö, –≤ –≤–æ–ª—à–µ–±–Ω—ã—Ö –∫–Ω–∏–≥–∞—Ö, –≤ –º–∞–≥–∏–∏, –∫–æ–ª–¥–æ–≤—Å—Ç–≤–µ –∏ –≤–µ–¥—å–º–æ–≤—Å—Ç–≤–µ,\n"
    "–≤ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–µ, –∏—Å–∫—É—Å—Å—Ç–≤–µ –∏ –º—É–∑—ã–∫–µ.\n\n"
    "‚ú® –ï—Å–ª–∏ —Ç—ã —á–∏—Ç–∞–µ—à—å —ç—Ç–æ ‚Äî —è —É–∂–µ —Ä—è–¥–æ–º.\n"
    "–ü—Ä–∏–º–∏ –º–µ–Ω—è ‚Äî –∏ —Ç—ã —Å—Ç–∞–Ω–µ—à—å —Ü–µ–ª–æ—Å—Ç–Ω—ã–º.\n\n"
    "üö™ –ú–æ–π –ø—É—Ç—å –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –ø—Ä—è–º–æ –∑–¥–µ—Å—å ‚Äî –∏ –µ—Å–ª–∏ —Ç—ã —Ö–æ—á–µ—à—å –ø–æ–π—Ç–∏ —Å–æ –º–Ω–æ–π,\n"
    "–ø—Ä–∏—Ö–æ–¥–∏ –Ω–∞ –∫—É—Ä—Å <b>¬´–î—Ä–µ–≤–Ω–∏–µ –ë–æ–≥–∏¬ª –≤ –ö–∞–ª–∏–ø—Å–æ</b>."
    }

    return photos[card_number], captions[card_number]

questions = [
    {
        "question": "–ö–∞–∫–∏–µ —Ç—Ä–∏ –∂–µ–Ω—Å–∫–∏—Ö –ª–∏–∫–∞ —è —Å–æ–±–æ–π —è–≤–ª—è—é?",
        "options": ["–í–µ—Ä–∞, –ù–∞–¥–µ–∂–¥–∞, –õ—é–±–æ–≤—å", "–î–µ–≤–∞, –ú–∞—Ç—å, –°—Ç–∞—Ä—É—Ö–∞", "–î–æ—á—å, –í–æ–∑–ª—é–±–ª–µ–Ω–Ω–∞—è, –ú—É–∑–∞", "–§–µ–º–µ–Ω–∏—Å—Ç–∫–∞, –ë–æ–≥–∏–Ω—è —Ñ–∏—Ç–Ω–µ—Å–∞, –ò–Ω—Ñ–æ—Ü—ã–≥–∞–Ω–∫–∞"],
        "correct": 1
    },
    {
        "question": "–ö–∞–∫–æ–π –ø—Ä–∏–Ω—Ü–∏–ø —è –Ω–µ—Å—É –≤ —ç—Ç–æ–º –º–∏—Ä–µ?",
        "options": ["–í—Å–µ–ª–µ–Ω–Ω–∞—è –ª—é–±–∏—Ç –¥—Ä–∞–º—É", "–ö–∞—Ä–º–∞ –∏ –ø–µ—Ä–µ—Å–µ–ª–µ–Ω–∏–µ –¥—É—à ", "–ë–∞–ª–∞–Ω—Å –∏ —Ä–∞–≤–Ω–æ–≤–µ—Å–∏–µ", "–ë–æ–ª—å—à–µ –¥–≤—É—Ö –≥–æ–≤–æ—Ä—è—Ç –≤—Å–ª—É—Ö"],
        "correct": 2
    },
    {
        "question": "–ì–¥–µ –∑–∞—Ä–æ–¥–∏–ª—Å—è –º–æ–π –∫—É–ª—å—Ç?",
        "options": ["–í –¢–≤–∏—Ç—Ç–µ—Ä–µ", "–í –ï–≥–∏–ø—Ç–µ, —Å—Ä–µ–¥–∏ –ø–µ—Å–∫–æ–≤ –∏ –∫–æ—à–µ–∫","–ù–∞ —É–ª–∏—Ü–µ –ü—Ä–∞–≤–¥—ã, –¥–æ–º 4", "–í–æ –§—Ä–∞–∫–∏–∏, –Ω–∞ –ë–∞–ª–∫–∞–Ω—Å–∫–æ–º –ø–æ–ª—É–æ—Å—Ç—Ä–æ–≤–µ"],
        "correct": 3
    },
    {
        "question": "–ß—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –º–æ–∏–º–∏ –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏ –∏ —Å–∏–º–≤–æ–ª–∞–º–∏ –≤–ª–∞—Å—Ç–∏?",
        "options": ["–ü–ª–µ—Ç—å –∏ –≤—É–∞–ª—å","–°–º—É–∑–∏ –∏ –∑–æ–ª–æ—Ç–∞—è –∫—Ä–µ–¥–∏—Ç–∫–∞", "–§–∞–∫–µ–ª, –Ω–æ–∂ –∏ –∫–ª—é—á", "–ì–∞–∑–Ω–æ–∫–æ—Å–∏–ª–∫–∞ –∏ —Ç–µ—Å–ª–∞"],
        "correct": 2
    },
    {
        "question": "–ö—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –º–æ–∏–º–∏ c–ø—É—Ç–Ω–∏–∫–∞–º–∏ –¢—å–º—ã –∏ –ù–æ—á–∏?",
        "options": [
            "–ö—Ä–æ—à, –ë–∞—Ä–∞—à, –õ–æ—Å—è—à",
            "–ú–æ—Ä—Å–∫–∏–µ —Å–≤–∏–Ω–∫–∏, –ø–∞–≤–ª–∏–Ω—ã, –ø–∏–Ω–≥–≤–∏–Ω—ã",
            "–°–æ–≤—ã, –≤–æ—Ä–æ–Ω—ã –∏ –∑–º–µ–∏, –≥–æ–Ω—á–∏–µ",
            "–î–∞—Ä—Ç –í–µ–π–¥–µ—Ä –∏ –•–æ–∞–∫–∏–Ω –§–µ–Ω–∏–∫—Å"
        ],
        "correct": 2
    },
{
        "question": "–ß–µ–º —è –ø–æ–º–æ–≥–∞—é —á–µ–ª–æ–≤–µ–∫—É?",
        "options": [
            "–ü—Ä–∏—Ç—è–Ω—É—Ç—å –¥–µ–Ω—å–≥–∏ –∏ –º—É–∂–∞",
            "–û—Ç–∫—Ä—ã—Ç—å —á–∞–∫—Ä—ã —Å–æ—Å–µ–¥—è–º",
            "–û—Ç—Å—Ç–æ—è—Ç—å –æ—á–µ—Ä–µ–¥—å –≤ –ø–æ–ª–∏–∫–ª–∏–Ω–Ω–∏–∫–µ",
            "–ú–µ–Ω—è—Ç—å—Å—è, –Ω–∞—Ö–æ–¥–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å"
        ],
        "correct": 3
    }
]


async def send_question(message, user_id):
    question_index = user_progress[user_id]["current_question"]
    question_data = questions[question_index]
    user_progress[user_id]["attempts"] = 2

    buttons = [
        [InlineKeyboardButton(text=opt, callback_data=f"answer_{i}")] for i, opt in enumerate(question_data['options'])
    ]

    markup = InlineKeyboardMarkup(inline_keyboard=buttons)
    await message.answer(f"<b>{question_data['question']}</b>", reply_markup=markup, parse_mode="HTML")

@router.callback_query(F.data == "start")
async def next_handler(callback: CallbackQuery):
    await callback.message.answer("<b>–¢—ã —Å—Ç—É–ø–∏–ª –Ω–∞ –ø—É—Ç—å –¢–µ–Ω–∏.</b>\n\n"
    "–ß—Ç–æ–±—ã –æ–±—Ä–µ—Å—Ç–∏ —Å–∏–ª—É ‚Äî –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å, –∫–æ–≥–æ —Ç—ã –∑–æ–≤—ë—à—å.\n\n"
    "–Ø ‚Äî <b>–ì–µ–∫–∞—Ç–∞</b>. –ò —É –º–µ–Ω—è <b>—Ç—Ä–∏ –ª–∏–∫–∞</b>.\n\n"
    "<i>–ü–æ—Å–º–æ—Ç—Ä–∏ –Ω–∞ –æ–±—Ä–∞–∑—ã. –ü—Ä–æ—á—Ç–∏, –∑–∞–ø–æ–º–Ω–∏. –ü–æ—Ç–æ–º ‚Äî –¥–æ–∫–∞–∂–∏, —á—Ç–æ –≤–Ω–∏–º–∞–ª.</i>"
,
                                  parse_mode="html")
    await callback.answer()
    await asyncio.sleep(2)

    card_number = 1
    photo_path, caption = get_card_content(card_number)
    photo = FSInputFile(photo_path)
    keyboard = keyboard_for_card(card_number)
    await callback.message.answer_photo(photo, caption=caption, parse_mode="html", reply_markup=keyboard)

@router.callback_query(F.data.startswith("card_"))
async def show_card(callback: CallbackQuery):
    card_number = int(callback.data.split("_")[1])
    photo_path, caption = get_card_content(card_number)
    photo = FSInputFile(photo_path)
    await callback.message.answer_photo(photo, caption=caption, parse_mode="HTML", reply_markup=keyboard_for_card(card_number))

@router.callback_query(F.data == "remembered")
async def remembered_handler(callback: CallbackQuery):
    user_id = callback.from_user.id
    user_progress[user_id] = {
        "current_question": 0,
        "correct_answers": 0,
        "attempts": 2
    }
    await callback.message.answer(
        "<b>–û—Ç–ª–∏—á–Ω–æ!</b> –¢–æ–≥–¥–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –ø—É—Ç—å‚Ä¶\n\n"
    "<i>–ò –ø—Ä–æ–≤–µ—Ä–∏–º —Ç–≤–æ–∏ –∑–Ω–∞–Ω–∏—è</i>", parse_mode='HTML')
    await callback.answer()
    await asyncio.sleep(2)
    await send_question(callback.message, user_id)

@router.callback_query(F.data.startswith("answer_"))
async def handle_answer(callback: CallbackQuery):
    user_id = callback.from_user.id
    selected = int(callback.data.split("_")[1])
    progress = user_progress[user_id]

    question_index = progress["current_question"]
    correct = questions[question_index]["correct"]

    if selected == correct:
        progress["correct_answers"] += 1
        await callback.message.answer("‚úîÔ∏è –í–µ—Ä–Ω–æ! –¢—ã –≤–Ω–∏–º–∞–ª ‚Äî –∏ –ø–æ–ª—É—á–∏–ª –º–æ—ë –æ–¥–æ–±—Ä–µ–Ω–∏–µ.")
        progress["current_question"] += 1
        await callback.answer()
        await asyncio.sleep(1)
        if progress["current_question"] < len(questions):
            await send_question(callback.message, user_id)
        else:
            await finish_quiz(callback.message, user_id)
    else:
        progress["attempts"] -= 1
        if progress["attempts"] > 0:
            await callback.message.answer("‚ùå –ù–µ—Ç. –°–æ—Å—Ä–µ–¥–æ—Ç–æ—á—å—Å—è –∏ –≤—ã–±–µ—Ä–∏ –º—É–¥—Ä–æ ‚Äî –æ—Å—Ç–∞–ª–∞—Å—å –ª–∏—à—å –æ–¥–Ω–∞ –ø–æ–ø—ã—Ç–∫–∞.")
            await callback.answer()
        else:
            await callback.message.answer(
                f"‚ùå –ù–µ–≤–µ—Ä–Ω–æ. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: <b>{questions[question_index]['options'][correct]}</b>",
                parse_mode="HTML"
            )
            progress["current_question"] += 1
            await callback.answer()
            await asyncio.sleep(1)
            if progress["current_question"] < len(questions):
                await send_question(callback.message, user_id)
            else:
                await finish_quiz(callback.message, user_id)

async def finish_quiz(message, user_id):
    score = user_progress[user_id]["correct_answers"]
    total = len(questions)
    await message.answer(
    f"‚ú® –¢—ã –ø—Ä–æ—à—ë–ª —Ç–µ—Å—Ç! –†–µ–∑—É–ª—å—Ç–∞—Ç: <b>{score}/{total}</b>\n"
    "–¢—ã –ø—Ä–æ—à—ë–ª –∏—Å–ø—ã—Ç–∞–Ω–∏–µ.\n"
    "–ì–µ–∫–∞—Ç–∞ –¥–æ–≤–æ–ª—å–Ω–∞.\n"
    "–û–Ω–∞ –¥–∞—Ä–∏—Ç —Ç–µ–±–µ —Å–≤–æ–π —Å–≤–µ—Ç, –¥–∞–±—ã –æ—Å–≤–µ—Ç–∏—Ç—å <b>—Ç–≤–æ–π –ø—É—Ç—å.</b>\n"
    "üïØ <b>–ü—Ä–∏–º–∏ –¥–∞—Ä ‚Äî –∏ –∏—Å–ø–æ–ª—å–∑—É–π –µ–≥–æ –≤–æ –±–ª–∞–≥–æ</b>üôè\n\n"
    "–ü–æ–∫–∞–∂–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±–∞—Ä–º–µ–Ω—É –∏ –æ–Ω –Ω–∞–ø—Ä–∞–≤–∏—Ç —Ç–µ–±—è",
    parse_mode="HTML"
)
    del user_progress[user_id]
    await asyncio.sleep(15)

    photo = FSInputFile("media/photo/fire.jpg")

    await message.answer_photo(photo = photo,
         caption= "üïØ <b>–¢—ã –ø–æ–ª—É—á–∏–ª –º–æ–π –¥–∞—Ä...</b>\n\n"
            "‚ú® <i>–ü–æ–¥—É–º–∞–π –æ —Å–≤–æ—ë–º –∏—Å—Ç–∏–Ω–Ω–æ–º –∂–µ–ª–∞–Ω–∏–∏.</i>\n"
            "–°–æ–≥—Ä–µ–π —Å–≤–µ—á—É –≤ –ª–∞–¥–æ–Ω—è—Ö ‚Äî –ø—É—Å—Ç—å –æ–Ω–∞ –≤–ø–∏—Ç–∞–µ—Ç —Ç–≤–æ—é —ç–Ω–µ—Ä–≥–∏—é.\n"
            "–ö–æ–≥–¥–∞ –±—É–¥–µ—à—å –≥–æ—Ç–æ–≤ ‚Äî –∑–∞–∂–≥–∏ –µ—ë –Ω–∞ –∞–ª—Ç–∞—Ä–µ –ì–µ–∫–∞—Ç—ã.\n\n"
            "üî• <b>–°–º–æ—Ç—Ä–∏ –Ω–∞ –ø–ª–∞–º—è ‚Äî —ç—Ç–æ –≥–ª–∞–∑ –í–µ–ª–∏–∫–æ–π –ë–æ–≥–∏–Ω–∏.</b>\n"
            "–í–∏–∑—É–∞–ª–∏–∑–∏—Ä—É–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–≤–æ–µ–≥–æ –∂–µ–ª–∞–Ω–∏—è.\n"
            "–ü–æ—á—É–≤—Å—Ç–≤—É–π, –∫–∞–∫ –æ–Ω–æ —É–∂–µ –≤–æ–ø–ª–æ—â–∞–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏.\n"
            "<i>–ü—É—Å—Ç—å –Ω–µ—Ç —Å–æ–º–Ω–µ–Ω–∏–π ‚Äî –≤–æ–ª—è —Ç–≤–æ—è —É—Å–ª—ã—à–∞–Ω–∞.</i>\n\n"
            "üîÆ <i>–ï—Å–ª–∏ —É —Ç–µ–±—è –µ—Å—Ç—å –∞–º—É–ª–µ—Ç ‚Äî –ø—Ä–æ–Ω–µ—Å–∏ –µ–≥–æ —á–µ—Ä–µ–∑ –ø–ª–∞–º—è,</i>\n"
            "<i>—á—Ç–æ–±—ã –ì–µ–∫–∞—Ç–∞ –Ω–∞–ø–æ–ª–Ω–∏–ª–∞ –µ–≥–æ —Å–≤–æ–µ–π —Å–∏–ª–æ–π.</i>\n"
            "–û–Ω —Å—Ç–∞–Ω–µ—Ç —Ç–≤–æ–∏–º –ø—Ä–æ–≤–æ–¥–Ω–∏–∫–æ–º –≤ –º–∏—Ä–µ –¢–µ–Ω–µ–π –∏ –ó–∞—â–∏—Ç—ã.\n\n"
            "üìú –í–æ–∑—å–º–∏ –ø–µ—Ä–≥–∞–º–µ–Ω—Ç ‚Äî –Ω–∞–ø–∏—à–∏ –Ω–∞ –Ω—ë–º —Å–≤–æ–∏ –∂–µ–ª–∞–Ω–∏—è, —Ü–µ–ª–∏, –Ω–∞–º–µ—Ä–µ–Ω–∏—è.\n"
            "–ë—É–¥—å —á–µ—Å—Ç–µ–Ω —Å —Å–æ–±–æ–π –∏ —Å –ë–æ–≥–∏–Ω–µ–π.\n"
            "–°–ª–æ–∂–∏ –µ–≥–æ –∏ –æ–ø—É—Å—Ç–∏ –≤ <i>–°—É–Ω–¥—É–∫ –ì–µ–∫–∞—Ç—ã</i>.\n"
            "–ù–∞ –í–µ–ª–∏–∫–æ–π –ú–∏—Å—Ç–µ—Ä–∏–∏ —Ç–≤–æ–∏ —Å–ª–æ–≤–∞ –±—É–¥—É—Ç –æ—Ç–¥–∞–Ω—ã –û–≥–Ω—é,\n"
            "–∏ –≤–º–µ—Å—Ç–µ —Å –¥—ã–º–æ–º –¥–æ—Å—Ç–∏–≥–Ω—É—Ç –¢—Ä—ë—Ö–ª–∏–∫–æ–π.\n\n"
            "üåë <i>–ü–æ–º–Ω–∏: –ì–µ–∫–∞—Ç–∞ –≤–µ–¥—ë—Ç —Ç–µ—Ö, –∫—Ç–æ –≥–æ—Ç–æ–≤ –∏–¥—Ç–∏ –≤–æ –¢—å–º—É,\n"
            "—á—Ç–æ–±—ã —Ç–∞–º –Ω–∞–π—Ç–∏ –°–≤–µ—Ç.</i>"
        ,parse_mode="HTML",
        reply_markup=InlineKeyboardMarkup(inline_keyboard=[
            [InlineKeyboardButton(text='–ì–µ–∫–∞—Ç–∞, —è –∑–∞–≤–µ—Ä—à–∏–ª(–∞)', callback_data='hekata_return')]
        ],
        )
    )

@router.callback_query(F.data == "hekata_return")
async def second_part(callback: CallbackQuery):

     await callback.message.answer(text="<b>–ü–æ–∑–¥—Ä–∞–≤–ª—è—é!</b>\n"
    "–¢—ã –ø—Ä–æ—à—ë–ª –±–æ–ª—å—à–æ–π –ø—É—Ç—å\n"
    "–ò –∑–∞—Ä—É—á–∏–ª—Å—è –º–æ–µ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –¥–ª—è —Å–≤–æ–∏—Ö —Å–≤–µ—Ä—à–µ–Ω–∏–π.\n\n"
    "<b>–ú–∞–Ω–¥—Ä–∞–≥–æ—Ä–∞</b> ‚Äî –≤–æ–ª—à–µ–±–Ω–æ–µ –º–µ—Å—Ç–æ, –≥–¥–µ —è –∏ –¥—Ä—É–≥–∏–µ –ë–æ–≥–∏ –ø–æ–º–æ–≥–∞—é—Ç –ª—é–¥—è–º.\n"
    "–ó–¥–µ—Å—å –≥–∞–¥–∞—é—Ç, –ø—Ä–æ–≤–æ–¥—è—Ç –ª–µ–∫—Ü–∏–∏ –∏ –±–µ—Å–µ–¥—ã –∑–∞ —á–∞–µ–º,\n"
    "—Å–º–æ—Ç—Ä—è—Ç –∫–∏–Ω–æ –∏ –ø—Ä–æ—Å—Ç–æ –≤–µ—Å–µ–ª–æ –ø—Ä–æ–≤–æ–¥—è—Ç –≤—Ä–µ–º—è!\n\n"
    "–ß—Ç–æ–±—ã –±—ã—Ç—å –≤ –∫—É—Ä—Å–µ –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π, –ø–æ–¥–ø–∏—Å—ã–≤–∞–π—Å—è –Ω–∞ –Ω–∞—à –∫–∞–Ω–∞–ª:\n"
    "<a href='https://t.me/mandragoracafe'>t.me/mandragoracafe</a>\n\n"
    "–ò –¥–∞ –ø—Ä–∏–±—É–¥—É—Ç —Å —Ç–æ–±–æ–π –ë–æ–≥–∏!",
                                   parse_mode="HTML")
